import{r as m,b as xs,a as Ke}from"./vendor-92c95717.js";import{B as us}from"./router-1c1c3ca1.js";import{m as Ce}from"./utils-fb2c234a.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(c){if(c.ep)return;c.ep=!0;const i=a(c);fetch(c.href,i)}})();var We={exports:{}},ve={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=m,ys=Symbol.for("react.element"),vs=Symbol.for("react.fragment"),gs=Object.prototype.hasOwnProperty,Ns=js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fs={key:!0,ref:!0,__self:!0,__source:!0};function Ge(s,t,a){var n,c={},i=null,o=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)gs.call(t,n)&&!fs.hasOwnProperty(n)&&(c[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)c[n]===void 0&&(c[n]=t[n]);return{$$typeof:ys,type:s,key:i,ref:o,props:c,_owner:Ns.current}}ve.Fragment=vs;ve.jsx=Ge;ve.jsxs=Ge;We.exports=ve;var e=We.exports,Ee={},Re=xs;Ee.createRoot=Re.createRoot,Ee.hydrateRoot=Re.hydrateRoot;let bs={data:""},ks=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||bs,ws=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Cs=/\/\*[^]*?\*\/|  +/g,Oe=/\n+/g,K=(s,t)=>{let a="",n="",c="";for(let i in s){let o=s[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":n+=i[1]=="f"?K(o,i):i+"{"+K(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=K(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,r=>/&/.test(r)?r.replace(/&/g,l):l?l+" "+r:r)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=K.p?K.p(i,o):i+":"+o+";")}return a+(t&&c?t+"{"+c+"}":c)+n},H={},Je=s=>{if(typeof s=="object"){let t="";for(let a in s)t+=a+Je(s[a]);return t}return s},Ss=(s,t,a,n,c)=>{let i=Je(s),o=H[i]||(H[i]=(r=>{let u=0,j=11;for(;u<r.length;)j=101*j+r.charCodeAt(u++)>>>0;return"go"+j})(i));if(!H[o]){let r=i!==s?s:(u=>{let j,x,g=[{}];for(;j=ws.exec(u.replace(Cs,""));)j[4]?g.shift():j[3]?(x=j[3].replace(Oe," ").trim(),g.unshift(g[0][x]=g[0][x]||{})):g[0][j[1]]=j[2].replace(Oe," ").trim();return g[0]})(s);H[o]=K(c?{["@keyframes "+o]:r}:r,a?"":"."+o)}let l=a&&H.g?H.g:null;return a&&(H.g=H[o]),((r,u,j,x)=>{x?u.data=u.data.replace(x,r):u.data.indexOf(r)===-1&&(u.data=j?r+u.data:u.data+r)})(H[o],t,n,l),o},Es=(s,t,a)=>s.reduce((n,c,i)=>{let o=t[i];if(o&&o.call){let l=o(a),r=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=r?"."+r:l&&typeof l=="object"?l.props?"":K(l,""):l===!1?"":l}return n+c+(o??"")},"");function ge(s){let t=this||{},a=s.call?s(t.p):s;return Ss(a.unshift?a.raw?Es(a,[].slice.call(arguments,1),t.p):a.reduce((n,c)=>Object.assign(n,c&&c.call?c(t.p):c),{}):a,ks(t.target),t.g,t.o,t.k)}let Ze,ze,Te;ge.bind({g:1});let V=ge.bind({k:1});function zs(s,t,a,n){K.p=t,Ze=s,ze=a,Te=n}function G(s,t){let a=this||{};return function(){let n=arguments;function c(i,o){let l=Object.assign({},i),r=l.className||c.className;a.p=Object.assign({theme:ze&&ze()},l),a.o=/ *go\d+/.test(r),l.className=ge.apply(a,n)+(r?" "+r:""),t&&(l.ref=o);let u=s;return s[0]&&(u=l.as||s,delete l.as),Te&&u[0]&&Te(l),Ze(u,l)}return t?t(c):c}}var Ts=s=>typeof s=="function",xe=(s,t)=>Ts(s)?s(t):s,Ls=(()=>{let s=0;return()=>(++s).toString()})(),Xe=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),Ds=20,Ye=(s,t)=>{switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,Ds)};case 1:return{...s,toasts:s.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:a}=t;return Ye(s,{type:s.toasts.find(i=>i.id===a.id)?1:0,toast:a});case 3:let{toastId:n}=t;return{...s,toasts:s.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let c=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+c}))}}},pe=[],Z={toasts:[],pausedAt:void 0},se=s=>{Z=Ye(Z,s),pe.forEach(t=>{t(Z)})},Ms={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},As=(s={})=>{let[t,a]=m.useState(Z),n=m.useRef(Z);m.useEffect(()=>(n.current!==Z&&a(Z),pe.push(a),()=>{let i=pe.indexOf(a);i>-1&&pe.splice(i,1)}),[]);let c=t.toasts.map(i=>{var o,l,r;return{...s,...s[i.type],...i,removeDelay:i.removeDelay||((o=s[i.type])==null?void 0:o.removeDelay)||(s==null?void 0:s.removeDelay),duration:i.duration||((l=s[i.type])==null?void 0:l.duration)||(s==null?void 0:s.duration)||Ms[i.type],style:{...s.style,...(r=s[i.type])==null?void 0:r.style,...i.style}}});return{...t,toasts:c}},$s=(s,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Ls()}),le=s=>(t,a)=>{let n=$s(t,s,a);return se({type:2,toast:n}),n.id},I=(s,t)=>le("blank")(s,t);I.error=le("error");I.success=le("success");I.loading=le("loading");I.custom=le("custom");I.dismiss=s=>{se({type:3,toastId:s})};I.remove=s=>se({type:4,toastId:s});I.promise=(s,t,a)=>{let n=I.loading(t.loading,{...a,...a==null?void 0:a.loading});return typeof s=="function"&&(s=s()),s.then(c=>{let i=t.success?xe(t.success,c):void 0;return i?I.success(i,{id:n,...a,...a==null?void 0:a.success}):I.dismiss(n),c}).catch(c=>{let i=t.error?xe(t.error,c):void 0;i?I.error(i,{id:n,...a,...a==null?void 0:a.error}):I.dismiss(n)}),s};var _s=(s,t)=>{se({type:1,toast:{id:s,height:t}})},Rs=()=>{se({type:5,time:Date.now()})},ne=new Map,Os=1e3,Is=(s,t=Os)=>{if(ne.has(s))return;let a=setTimeout(()=>{ne.delete(s),se({type:4,toastId:s})},t);ne.set(s,a)},Ps=s=>{let{toasts:t,pausedAt:a}=As(s);m.useEffect(()=>{if(a)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let r=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(r<0){l.visible&&I.dismiss(l.id);return}return setTimeout(()=>I.dismiss(l.id),r)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,a]);let n=m.useCallback(()=>{a&&se({type:6,time:Date.now()})},[a]),c=m.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:r=8,defaultPosition:u}=o||{},j=t.filter(v=>(v.position||u)===(i.position||u)&&v.height),x=j.findIndex(v=>v.id===i.id),g=j.filter((v,h)=>h<x&&v.visible).length;return j.filter(v=>v.visible).slice(...l?[g+1]:[0,g]).reduce((v,h)=>v+(h.height||0)+r,0)},[t]);return m.useEffect(()=>{t.forEach(i=>{if(i.dismissed)Is(i.id,i.removeDelay);else{let o=ne.get(i.id);o&&(clearTimeout(o),ne.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:_s,startPause:Rs,endPause:n,calculateOffset:c}}},Fs=V`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,qs=V`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bs=V`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Hs=G("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Fs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${qs} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Bs} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Qs=V`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Vs=G("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Qs} 1s linear infinite;
`,Us=V`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ks=V`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ws=G("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Us} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ks} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Gs=G("div")`
  position: absolute;
`,Js=G("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Zs=V`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xs=G("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Zs} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ys=({toast:s})=>{let{icon:t,type:a,iconTheme:n}=s;return t!==void 0?typeof t=="string"?m.createElement(Xs,null,t):t:a==="blank"?null:m.createElement(Js,null,m.createElement(Vs,{...n}),a!=="loading"&&m.createElement(Gs,null,a==="error"?m.createElement(Hs,{...n}):m.createElement(Ws,{...n})))},ea=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,sa=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,aa="0%{opacity:0;} 100%{opacity:1;}",ta="0%{opacity:1;} 100%{opacity:0;}",ia=G("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,na=G("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ra=(s,t)=>{let a=s.includes("top")?1:-1,[n,c]=Xe()?[aa,ta]:[ea(a),sa(a)];return{animation:t?`${V(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${V(c)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},la=m.memo(({toast:s,position:t,style:a,children:n})=>{let c=s.height?ra(s.position||t||"top-center",s.visible):{opacity:0},i=m.createElement(Ys,{toast:s}),o=m.createElement(na,{...s.ariaProps},xe(s.message,s));return m.createElement(ia,{className:s.className,style:{...c,...a,...s.style}},typeof n=="function"?n({icon:i,message:o}):m.createElement(m.Fragment,null,i,o))});zs(m.createElement);var ca=({id:s,className:t,style:a,onHeightUpdate:n,children:c})=>{let i=m.useCallback(o=>{if(o){let l=()=>{let r=o.getBoundingClientRect().height;n(s,r)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[s,n]);return m.createElement("div",{ref:i,className:t,style:a},c)},oa=(s,t)=>{let a=s.includes("top"),n=a?{top:0}:{bottom:0},c=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Xe()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...n,...c}},da=ge`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,he=16,ma=({reverseOrder:s,position:t="top-center",toastOptions:a,gutter:n,children:c,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:r}=Ps(a);return m.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:he,left:he,right:he,bottom:he,pointerEvents:"none",...i},className:o,onMouseEnter:r.startPause,onMouseLeave:r.endPause},l.map(u=>{let j=u.position||t,x=r.calculateOffset(u,{reverseOrder:s,gutter:n,defaultPosition:t}),g=oa(j,x);return m.createElement(ca,{id:u.id,key:u.id,onHeightUpdate:r.updateHeight,className:u.visible?da:"",style:g},u.type==="custom"?xe(u.message,u):c?c(u):m.createElement(la,{toast:u,position:j}))}))},ha={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pa=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xa=(s,t)=>{const a=m.forwardRef(({color:n="currentColor",size:c=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...r},u)=>m.createElement("svg",{ref:u,...ha,width:c,height:c,stroke:n,strokeWidth:o?Number(i)*24/Number(c):i,className:`lucide lucide-${pa(s)}`,...r},[...t.map(([j,x])=>m.createElement(j,x)),...(Array.isArray(l)?l:[l])||[]]));return a.displayName=`${s}`,a};var b=xa;const re=b("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),es=b("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),O=b("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ie=b("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),Q=b("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ua=b("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),U=b("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Pe=b("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Le=b("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ss=b("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),as=b("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ja=b("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ne=b("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ue=b("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),A=b("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),X=b("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Fe=b("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ya=b("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),R=b("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),qe=b("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Be=b("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),va=b("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),He=b("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),W=b("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ga=b("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Na=b("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),De=b("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),je=b("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Qe=b("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),ts=b("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),is=b("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),fa=b("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),ie=b("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fe=b("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ba=b("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Se=b("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),ka=b("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),wa=b("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ye=b("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ve=b("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ue=b("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Y=b("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ee=b("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ce=b("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ca=({collapsed:s,onToggle:t,connections:a,currentConnection:n,onConnectionSelect:c,onNewConnection:i,analysisHistory:o,onHistorySelect:l,onFileUpload:r})=>{const[u,j]=m.useState("files"),[x,g]=m.useState(""),v=m.useRef(null),h=o.filter(d=>d.filename.toLowerCase().includes(x.toLowerCase())),p=d=>{d.preventDefault(),d.stopPropagation()},E=d=>{d.preventDefault(),d.stopPropagation();const S=d.dataTransfer.files;S.length>0&&r(S)},z=d=>{const S=d.target.files;S.length>0&&r(S),d.target.value=""},y=d=>{const S=new Date(d);return S.toLocaleDateString()+" "+S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return e.jsxs("div",{className:`sidebar ${s?"collapsed":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("div",{className:"sidebar-title",children:!s&&e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"sidebar-icon"}),e.jsx("span",{children:"SQL Analyzer"})]})}),e.jsx("button",{className:"sidebar-toggle",onClick:t,title:s?"Expandir sidebar":"Contraer sidebar",children:s?e.jsx(as,{}):e.jsx(ss,{})})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sidebar-nav",children:[e.jsxs("button",{className:`nav-tab ${u==="files"?"active":""}`,onClick:()=>j("files"),title:"Explorador de archivos",children:[e.jsx(Be,{size:16}),e.jsx("span",{children:"Archivos"})]}),e.jsxs("button",{className:`nav-tab ${u==="connections"?"active":""}`,onClick:()=>j("connections"),title:"Conexiones de base de datos",children:[e.jsx(A,{size:16}),e.jsx("span",{children:"Conexiones"})]}),e.jsxs("button",{className:`nav-tab ${u==="history"?"active":""}`,onClick:()=>j("history"),title:"Historial de análisis",children:[e.jsx(He,{size:16}),e.jsx("span",{children:"Historial"})]})]}),u==="files"&&e.jsxs("div",{className:"sidebar-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"Explorador de Archivos"}),e.jsx("button",{className:"btn-icon",onClick:()=>{var d;return(d=v.current)==null?void 0:d.click()},title:"Subir archivo",children:e.jsx(Ve,{size:16})})]}),e.jsxs("div",{className:"file-drop-zone",onDragOver:p,onDrop:E,onClick:()=>{var d;return(d=v.current)==null?void 0:d.click()},children:[e.jsx(Ve,{className:"drop-icon"}),e.jsx("p",{children:"Arrastra archivos SQL aquí"}),e.jsx("p",{className:"drop-hint",children:"o haz clic para seleccionar"}),e.jsx("div",{className:"supported-formats",children:e.jsx("small",{children:"Formatos: .sql, .txt"})})]}),e.jsx("input",{ref:v,type:"file",multiple:!0,accept:".sql,.txt",onChange:z,style:{display:"none"}}),e.jsxs("div",{className:"file-list",children:[e.jsxs("div",{className:"file-item",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:"sample.sql"}),e.jsx("small",{children:"2.3 KB"})]}),e.jsxs("div",{className:"file-item",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:"queries.sql"}),e.jsx("small",{children:"15.7 KB"})]})]})]}),u==="connections"&&e.jsxs("div",{className:"sidebar-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"Conexiones"}),e.jsx("button",{className:"btn-icon",onClick:i,title:"Nueva conexión",children:e.jsx(je,{size:16})})]}),e.jsx("div",{className:"connections-list",children:a.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(A,{className:"empty-icon"}),e.jsx("p",{children:"No hay conexiones configuradas"}),e.jsxs("button",{className:"btn-primary btn-sm",onClick:i,children:[e.jsx(je,{size:16}),"Nueva Conexión"]})]}):a.map(d=>e.jsxs("div",{className:`connection-item ${(n==null?void 0:n.id)===d.id?"active":""}`,onClick:()=>c(d),children:[e.jsxs("div",{className:"connection-info",children:[e.jsx("div",{className:"connection-name",children:d.name}),e.jsxs("div",{className:"connection-details",children:[e.jsx("span",{className:"connection-type",children:d.type}),e.jsxs("span",{className:"connection-host",children:[d.host,":",d.port]})]})]}),e.jsx("div",{className:`connection-status ${d.status||"disconnected"}`,children:e.jsx("div",{className:"status-dot"})})]},d.id))})]}),u==="history"&&e.jsxs("div",{className:"sidebar-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"Historial"}),e.jsxs("div",{className:"search-box",children:[e.jsx(is,{size:14}),e.jsx("input",{type:"text",placeholder:"Buscar análisis...",value:x,onChange:d=>g(d.target.value)})]})]}),e.jsx("div",{className:"history-list",children:h.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(Ne,{className:"empty-icon"}),e.jsx("p",{children:"No hay análisis en el historial"})]}):h.map(d=>{var S,w;return e.jsxs("div",{className:"history-item",onClick:()=>l(d),children:[e.jsxs("div",{className:"history-info",children:[e.jsxs("div",{className:"history-filename",children:[e.jsx(R,{size:16}),e.jsx("span",{children:d.filename})]}),e.jsxs("div",{className:"history-summary",children:[e.jsxs("span",{className:"error-count",children:[((S=d.summary)==null?void 0:S.total_errors)||0," errores"]}),e.jsxs("span",{className:"performance-score",children:[((w=d.summary)==null?void 0:w.performance_score)||100,"% rendimiento"]})]}),e.jsx("div",{className:"history-date",children:y(d.timestamp)})]}),e.jsx("div",{className:"history-actions",children:e.jsx("button",{className:"btn-icon btn-sm",title:"Cargar análisis",children:e.jsx(R,{size:14})})})]},d.id)})})]})]}),s&&e.jsxs("div",{className:"sidebar-collapsed",children:[e.jsx("button",{className:"collapsed-btn",onClick:()=>{j("files"),t()},title:"Explorador de archivos",children:e.jsx(Be,{size:20})}),e.jsx("button",{className:"collapsed-btn",onClick:()=>{j("connections"),t()},title:"Conexiones",children:e.jsx(A,{size:20})}),e.jsx("button",{className:"collapsed-btn",onClick:()=>{j("history"),t()},title:"Historial",children:e.jsx(He,{size:20})})]})]})},Sa=({value:s,onChange:t,language:a="sql",theme:n="dark",fontSize:c=14,wordWrap:i=!0,lineNumbers:o=!0,minimap:l=!0,readOnly:r=!1})=>{const u=m.useRef(null),[j,x]=m.useState(1),[g,v]=m.useState({line:1,column:1});m.useEffect(()=>{const y=(s.match(/\n/g)||[]).length+1;x(y)},[s]);const h=y=>{const d=y.target.value;t(d);const S=y.target,k=d.substring(0,S.selectionStart).split(`
`),L=k.length,f=k[k.length-1].length+1;v({line:L,column:f})},p=y=>{var S;const d=y.target;if(y.key==="Tab"){y.preventDefault();const w=d.selectionStart,k=d.selectionEnd,L=s.substring(0,w)+"  "+s.substring(k);t(L),setTimeout(()=>{d.selectionStart=d.selectionEnd=w+2},0)}if(y.key==="Enter"){const w=d.selectionStart,L=s.substring(0,w).split(`
`),f=L[L.length-1],T=f.match(/^\s*/)[0],$=["SELECT","FROM","WHERE","JOIN","INNER","LEFT","RIGHT"],B=(S=f.trim().split(/\s+/).pop())==null?void 0:S.toUpperCase(),_=$.includes(B)?"  ":"",oe=s.substring(0,w)+`
`+T+_+s.substring(w);t(oe),setTimeout(()=>{d.selectionStart=d.selectionEnd=w+1+T.length+_.length},0),y.preventDefault()}},E=()=>Array.from({length:j},(y,d)=>d+1),z=y=>{const d=["SELECT","FROM","WHERE","INSERT","UPDATE","DELETE","CREATE","ALTER","DROP","TABLE","INDEX","VIEW","DATABASE","SCHEMA","JOIN","INNER","LEFT","RIGHT","OUTER","ON","AS","AND","OR","NOT","IN","EXISTS","BETWEEN","LIKE","ORDER","BY","GROUP","HAVING","LIMIT","OFFSET","UNION","INTERSECT","EXCEPT","CASE","WHEN","THEN","ELSE","END","IF","NULL","TRUE","FALSE"],S=["COUNT","SUM","AVG","MIN","MAX","CONCAT","SUBSTRING","LENGTH","UPPER","LOWER","TRIM","NOW","DATE","TIME","YEAR","MONTH","DAY"];let w=y;return d.forEach(k=>{const L=new RegExp(`\\b${k}\\b`,"gi");w=w.replace(L,`<span class="sql-keyword">${k}</span>`)}),S.forEach(k=>{const L=new RegExp(`\\b${k}\\s*\\(`,"gi");w=w.replace(L,f=>`<span class="sql-function">${f.slice(0,-1)}</span>(`)}),w=w.replace(/'([^']*)'/g,`<span class="sql-string">'$1'</span>`),w=w.replace(/"([^"]*)"/g,'<span class="sql-string">"$1"</span>'),w=w.replace(/\b\d+(\.\d+)?\b/g,'<span class="sql-number">$&</span>'),w=w.replace(/--.*$/gm,'<span class="sql-comment">$&</span>'),w=w.replace(/\/\*[\s\S]*?\*\//g,'<span class="sql-comment">$&</span>'),w};return e.jsxs("div",{className:`code-editor ${n}`,children:[e.jsxs("div",{className:"editor-container",children:[o&&e.jsx("div",{className:"line-numbers",children:E().map(y=>e.jsx("div",{className:"line-number",children:y},y))}),e.jsxs("div",{className:"editor-content",children:[e.jsx("div",{className:"syntax-highlight",dangerouslySetInnerHTML:{__html:z(s).replace(/\n/g,"<br/>")}}),e.jsx("textarea",{ref:u,value:s,onChange:h,onKeyDown:p,className:"editor-textarea",style:{fontSize:`${c}px`},spellCheck:!1,readOnly:r,placeholder:r?"Análisis en progreso...":"Escribe tu consulta SQL aquí..."})]}),l&&s.length>500&&e.jsx("div",{className:"editor-minimap",children:e.jsx("div",{className:"minimap-content",children:s.split(`
`).map((y,d)=>e.jsx("div",{className:"minimap-line",style:{height:"2px",backgroundColor:y.trim()?"var(--text-secondary)":"transparent",opacity:y.trim()?.6:0}},d))})})]}),e.jsxs("div",{className:"editor-footer",children:[e.jsxs("div",{className:"editor-info",children:[e.jsxs("span",{children:["Línea ",g.line,", Columna ",g.column]}),e.jsxs("span",{children:[s.length," caracteres"]}),e.jsxs("span",{children:[j," líneas"]})]}),e.jsxs("div",{className:"editor-settings",children:[e.jsx("span",{className:"language-indicator",children:a.toUpperCase()}),i&&e.jsx("span",{className:"wrap-indicator",children:"Wrap"})]})]})]})},Ea=({results:s,onDownload:t})=>{var r,u,j,x,g,v,h,p,E,z;const[a,n]=m.useState({errors:!0,recommendations:!0,statistics:!1});if(!s||!s.filename)return e.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-8 text-center",children:[e.jsx(Y,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error en el Análisis"}),e.jsx("p",{className:"text-gray-600",children:(s==null?void 0:s.error)||"Ha ocurrido un error inesperado durante el análisis."})]});const c=y=>y>=80?"excellent":y>=60?"good":y>=40?"fair":"poor",i=y=>y>=80?"text-green-600":y>=60?"text-blue-600":y>=40?"text-yellow-600":"text-red-600",o=y=>{n(d=>({...d,[y]:!d[y]}))},l=[{label:"Líneas",value:s.line_count||0,icon:R},{label:"Errores",value:((r=s.summary)==null?void 0:r.total_errors)||0,icon:Y},{label:"Tamaño",value:`${Math.round((s.file_size||0)/1024)} KB`,icon:A},{label:"Performance",value:`${((u=s.summary)==null?void 0:u.performance_score)||100}%`,icon:ye}];return e.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Resultados del Análisis"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Archivo: ",s.filename]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>t(s,"json"),className:"btn-secondary text-sm",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"JSON"]}),e.jsxs("button",{onClick:()=>t(s,"html"),className:"btn-secondary text-sm",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"HTML"]}),e.jsxs("button",{onClick:()=>t(s,"txt"),className:"btn-secondary text-sm",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"TXT"]})]})]}),e.jsxs("div",{className:`quality-score ${c(((j=s.summary)==null?void 0:j.performance_score)||100)}`,children:[e.jsxs("div",{className:`text-6xl font-bold mb-2 ${i(((x=s.summary)==null?void 0:x.performance_score)||100)}`,children:[((g=s.summary)==null?void 0:g.performance_score)||100,"%"]}),e.jsx("div",{className:"text-lg font-medium text-gray-700",children:"Score de Rendimiento"}),e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Basado en análisis de rendimiento y mejores prácticas"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:l.map((y,d)=>{const S=y.icon;return e.jsxs(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:d*.1},className:"card p-6 text-center",children:[e.jsx(S,{className:"w-8 h-8 text-primary-500 mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.value}),e.jsx("div",{className:"text-sm text-gray-600",children:y.label})]},y.label)})}),((v=s.analysis)==null?void 0:v.errors)&&s.analysis.errors.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>o("errors"),className:"w-full flex items-center justify-between p-6 text-left hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Errores y Advertencias (",s.analysis.errors.length,")"]})]}),e.jsx(Le,{className:`w-5 h-5 text-gray-400 transition-transform ${a.errors?"rotate-180":""}`})]}),a.errors&&e.jsx("div",{className:"px-6 pb-6 space-y-3",children:s.analysis.errors.map((y,d)=>e.jsx("div",{className:`error-item ${y.severity==="ERROR"?"error":"warning"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:y.severity==="ERROR"?e.jsx(Y,{className:"w-4 h-4 text-red-500"}):e.jsx(O,{className:"w-4 h-4 text-yellow-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Línea ",y.line]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${y.severity==="ERROR"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:y.severity})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:y.message}),y.code&&e.jsx("code",{className:"text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded block",children:y.code})]})]})},d))})]}),((h=s.summary)==null?void 0:h.recommendations)&&s.summary.recommendations.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>o("recommendations"),className:"w-full flex items-center justify-between p-6 text-left hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Recomendaciones (",s.summary.recommendations.length,")"]})]}),e.jsx(Le,{className:`w-5 h-5 text-gray-400 transition-transform ${a.recommendations?"rotate-180":""}`})]}),a.recommendations&&e.jsx("div",{className:"px-6 pb-6 space-y-4",children:s.summary.recommendations.map((y,d)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-100",children:e.jsx(W,{className:"w-4 h-4 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:y.type||"Recomendación"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:"INFO"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:y.message})]})]},d))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ne,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Información del Análisis"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Timestamp:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:new Date(s.analysis_timestamp).toLocaleString("es-ES")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Versión del Analizador:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.analyzer_version})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Caracteres:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:((E=(p=s.statistics)==null?void 0:p.character_count)==null?void 0:E.toLocaleString())||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Statements SQL:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:((z=s.statistics)==null?void 0:z.sql_statements)||0})]})]})]})]})},za=({activeTabs:s,activeTabId:t,onTabSelect:a,onTabClose:n,onTabContentChange:c,onNewTab:i,onAnalyze:o,onOpenMetrics:l,isAnalyzing:r,analysisProgress:u,currentAnalysis:j})=>{var d,S,w;const[x,g]=m.useState("split"),[v,h]=m.useState({theme:"dark",fontSize:14,wordWrap:!0,lineNumbers:!0,minimap:!0}),p=s.find(k=>k.id===t),E=k=>{p&&c(p.id,k)},z=k=>{switch(k.type){case"sql":return e.jsx(A,{size:14});case"result":return e.jsx(Q,{size:14});default:return e.jsx(R,{size:14})}},y=k=>{var f;if(!k)return null;const L=((f=k.summary)==null?void 0:f.total_errors)||0;return L===0?e.jsx(U,{className:"status-icon success",size:14}):L<5?e.jsx(O,{className:"status-icon warning",size:14}):e.jsx(O,{className:"status-icon error",size:14})};return e.jsxs("div",{className:"main-workspace",children:[e.jsxs("div",{className:"tab-bar",children:[e.jsxs("div",{className:"tabs-container",children:[s.map(k=>e.jsxs("div",{className:`tab ${k.id===t?"active":""} ${k.isDirty?"dirty":""}`,onClick:()=>a(k.id),children:[e.jsxs("div",{className:"tab-content",children:[z(k),e.jsx("span",{className:"tab-title",children:k.title}),k.isDirty&&e.jsx("div",{className:"dirty-indicator"}),y(k.analysis)]}),e.jsx("button",{className:"tab-close",onClick:L=>{L.stopPropagation(),n(k.id)},children:e.jsx(ee,{size:12})})]},k.id)),e.jsx("button",{className:"new-tab-btn",onClick:i,title:"Nueva pestaña",children:e.jsx(je,{size:16})})]}),e.jsxs("div",{className:"workspace-toolbar",children:[e.jsxs("div",{className:"view-mode-selector",children:[e.jsx("button",{className:`view-btn ${x==="editor"?"active":""}`,onClick:()=>g("editor"),title:"Solo editor",children:e.jsx(ue,{size:16})}),e.jsx("button",{className:`view-btn ${x==="split"?"active":""}`,onClick:()=>g("split"),title:"Vista dividida",children:e.jsx(ya,{size:16})}),e.jsx("button",{className:`view-btn ${x==="results"?"active":""}`,onClick:()=>g("results"),title:"Solo resultados",children:e.jsx(Q,{size:16})})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{className:"btn-primary",onClick:o,disabled:!p||!p.content.trim()||r,title:"Analizar SQL",children:[e.jsx(De,{size:16}),r?"Analizando...":"Analizar"]}),e.jsxs("button",{className:"btn-secondary",onClick:l,title:"Ver Métricas del Sistema",children:[e.jsx(re,{size:16}),"Métricas"]}),e.jsx("button",{className:"btn-secondary",disabled:!p,title:"Guardar archivo",children:e.jsx(ts,{size:16})}),e.jsx("button",{className:"btn-icon",title:"Configuración del editor",children:e.jsx(ie,{size:16})})]})]})]}),r&&e.jsxs("div",{className:"analysis-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${u}%`}})}),e.jsxs("span",{className:"progress-text",children:["Analizando... ",u,"%"]})]}),e.jsx("div",{className:"workspace-content",children:p?e.jsxs("div",{className:`content-panels view-${x}`,children:[(x==="editor"||x==="split")&&e.jsxs("div",{className:"editor-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h3",{children:[e.jsx(ue,{size:16}),"Editor SQL"]}),e.jsx("div",{className:"panel-info",children:e.jsxs("span",{className:"file-info",children:[p.title,p.content&&e.jsxs("small",{children:["(",p.content.length," caracteres)"]})]})})]}),e.jsx(Sa,{value:p.content,onChange:E,language:"sql",theme:v.theme,fontSize:v.fontSize,wordWrap:v.wordWrap,lineNumbers:v.lineNumbers,minimap:v.minimap,readOnly:r})]}),(x==="results"||x==="split")&&e.jsxs("div",{className:"results-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h3",{children:[e.jsx(Q,{size:16}),"Resultados del Análisis"]}),p.analysis&&e.jsxs("div",{className:"analysis-summary",children:[e.jsxs("span",{className:"error-count",children:[e.jsx(O,{size:14}),((d=p.analysis.summary)==null?void 0:d.total_errors)||0," errores"]}),e.jsxs("span",{className:"performance-score",children:[e.jsx(ce,{size:14}),((S=p.analysis.summary)==null?void 0:S.performance_score)||100,"%"]}),e.jsxs("span",{className:"security-score",children:[e.jsx(fe,{size:14}),((w=p.analysis.summary)==null?void 0:w.security_score)||100,"%"]})]})]}),p.analysis?e.jsx(Ea,{analysis:p.analysis,isLoading:r}):e.jsx("div",{className:"no-analysis",children:e.jsxs("div",{className:"no-analysis-content",children:[e.jsx(Q,{className:"no-analysis-icon"}),e.jsx("h3",{children:"No hay análisis disponible"}),e.jsx("p",{children:"Ejecuta el análisis para ver los resultados aquí"}),e.jsxs("button",{className:"btn-primary",onClick:o,disabled:!p.content.trim()||r,children:[e.jsx(De,{size:16}),"Analizar Ahora"]})]})})]})]}):e.jsx("div",{className:"empty-workspace",children:e.jsxs("div",{className:"empty-content",children:[e.jsx(A,{className:"empty-icon"}),e.jsx("h2",{children:"Bienvenido a SQL Analyzer Enterprise"}),e.jsx("p",{children:"Selecciona un archivo o crea una nueva consulta para comenzar"}),e.jsxs("div",{className:"empty-actions",children:[e.jsxs("button",{className:"btn-primary",onClick:i,children:[e.jsx(je,{size:16}),"Nueva Consulta"]}),e.jsxs("button",{className:"btn-secondary",children:[e.jsx(R,{size:16}),"Abrir Archivo"]})]})]})})}),e.jsxs("div",{className:"workspace-status",children:[e.jsx("div",{className:"status-left",children:p&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"status-item",children:["Líneas: ",(p.content.match(/\n/g)||[]).length+1]}),e.jsxs("span",{className:"status-item",children:["Caracteres: ",p.content.length]}),p.analysis&&e.jsxs("span",{className:"status-item",children:["Última análisis: ",new Date(p.analysis.timestamp||Date.now()).toLocaleTimeString()]})]})}),e.jsxs("div",{className:"status-right",children:[e.jsx("span",{className:"status-item",children:"SQL"}),e.jsx("span",{className:"status-item",children:"UTF-8"}),v.theme==="dark"?"🌙":"☀️"]})]})]})},Ta=({collapsed:s,onToggle:t,currentAnalysis:a,onExport:n,onAnalysisSettings:c})=>{var u,j,x,g,v,h,p,E,z,y;const[i,o]=m.useState("summary"),l=d=>{switch(d==null?void 0:d.toLowerCase()){case"critical":case"high":return e.jsx(O,{className:"severity-icon error",size:16});case"medium":return e.jsx(O,{className:"severity-icon warning",size:16});case"low":return e.jsx(W,{className:"severity-icon info",size:16});default:return e.jsx(U,{className:"severity-icon success",size:16})}},r=d=>d>=90?{value:d,level:"excellent",color:"success"}:d>=75?{value:d,level:"good",color:"info"}:d>=60?{value:d,level:"fair",color:"warning"}:{value:d,level:"poor",color:"error"};return e.jsxs("div",{className:`right-panel ${s?"collapsed":""}`,children:[e.jsxs("div",{className:"panel-header",children:[e.jsx("div",{className:"panel-title",children:!s&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"panel-icon"}),e.jsx("span",{children:"Análisis"})]})}),e.jsx("button",{className:"panel-toggle",onClick:t,title:s?"Expandir panel":"Contraer panel",children:s?e.jsx(ss,{}):e.jsx(as,{})})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"panel-nav",children:[e.jsxs("button",{className:`nav-tab ${i==="summary"?"active":""}`,onClick:()=>o("summary"),children:[e.jsx(Q,{size:14}),e.jsx("span",{children:"Resumen"})]}),e.jsxs("button",{className:`nav-tab ${i==="details"?"active":""}`,onClick:()=>o("details"),children:[e.jsx(R,{size:14}),e.jsx("span",{children:"Detalles"})]}),e.jsxs("button",{className:`nav-tab ${i==="export"?"active":""}`,onClick:()=>o("export"),children:[e.jsx(X,{size:14}),e.jsx("span",{children:"Exportar"})]})]}),e.jsx("div",{className:"panel-content",children:a?e.jsxs(e.Fragment,{children:[i==="summary"&&e.jsxs("div",{className:"summary-tab",children:[e.jsxs("div",{className:"summary-section",children:[e.jsx("h4",{children:"Métricas Generales"}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx(O,{size:16}),e.jsx("span",{children:"Errores Detectados"})]}),e.jsx("div",{className:"metric-value error",children:((u=a.summary)==null?void 0:u.total_errors)||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx(ce,{size:16}),e.jsx("span",{children:"Rendimiento"})]}),e.jsxs("div",{className:`metric-value ${r(((j=a.summary)==null?void 0:j.performance_score)||100).color}`,children:[((x=a.summary)==null?void 0:x.performance_score)||100,"%"]}),e.jsx("div",{className:"metric-level",children:r(((g=a.summary)==null?void 0:g.performance_score)||100).level})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx(fe,{size:16}),e.jsx("span",{children:"Seguridad"})]}),e.jsxs("div",{className:`metric-value ${r(((v=a.summary)==null?void 0:v.security_score)||100).color}`,children:[((h=a.summary)==null?void 0:h.security_score)||100,"%"]}),e.jsx("div",{className:"metric-level",children:r(((p=a.summary)==null?void 0:p.security_score)||100).level})]})]}),((E=a.summary)==null?void 0:E.recommendations)&&a.summary.recommendations.length>0&&e.jsxs("div",{className:"summary-section",children:[e.jsx("h4",{children:"Recomendaciones"}),e.jsx("div",{className:"recommendations-list",children:a.summary.recommendations.slice(0,3).map((d,S)=>e.jsxs("div",{className:`recommendation-item ${d.priority||"medium"}`,children:[e.jsxs("div",{className:"recommendation-header",children:[l(d.priority),e.jsx("span",{className:"recommendation-title",children:d.title||d.message})]}),d.action&&e.jsx("div",{className:"recommendation-action",children:d.action})]},S))})]}),e.jsxs("div",{className:"summary-section",children:[e.jsx("h4",{children:"Estadísticas"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Líneas"}),e.jsx("span",{className:"stat-value",children:a.line_count||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Tamaño"}),e.jsxs("span",{className:"stat-value",children:[Math.round((a.file_size||0)/1024),"KB"]})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Motor DB"}),e.jsx("span",{className:"stat-value",children:a.database_engine||"Auto"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Tiempo"}),e.jsxs("span",{className:"stat-value",children:[(a.processing_time||0).toFixed(2),"s"]})]})]})]})]}),i==="details"&&e.jsxs("div",{className:"details-tab",children:[e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Errores por Categoría"}),(z=a.analysis)!=null&&z.errors&&a.analysis.errors.length>0?e.jsx("div",{className:"error-categories",children:a.analysis.errors.slice(0,5).map((d,S)=>e.jsxs("div",{className:"error-item",children:[e.jsxs("div",{className:"error-header",children:[l(d.severity),e.jsx("span",{className:"error-category",children:d.category})]}),e.jsx("div",{className:"error-message",children:d.message}),d.line&&e.jsxs("div",{className:"error-location",children:["Línea ",d.line]})]},S))}):e.jsxs("div",{className:"no-errors",children:[e.jsx(U,{className:"success-icon"}),e.jsx("span",{children:"No se encontraron errores"})]})]}),((y=a.analysis)==null?void 0:y.performance_issues)&&a.analysis.performance_issues.length>0&&e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Problemas de Rendimiento"}),e.jsx("div",{className:"performance-issues",children:a.analysis.performance_issues.slice(0,3).map((d,S)=>e.jsxs("div",{className:"issue-item",children:[e.jsxs("div",{className:"issue-header",children:[e.jsx(ye,{size:14}),e.jsx("span",{className:"issue-type",children:d.type})]}),e.jsx("div",{className:"issue-message",children:d.message}),d.recommendation&&e.jsx("div",{className:"issue-recommendation",children:d.recommendation})]},S))})]})]}),i==="export"&&e.jsxs("div",{className:"export-tab",children:[e.jsxs("div",{className:"export-section",children:[e.jsx("h4",{children:"Formatos de Exportación"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option",onClick:()=>n("json"),children:[e.jsx(R,{size:16}),e.jsx("span",{children:"JSON"}),e.jsx("small",{children:"Datos estructurados"})]}),e.jsxs("button",{className:"export-option",onClick:()=>n("html"),children:[e.jsx(R,{size:16}),e.jsx("span",{children:"HTML"}),e.jsx("small",{children:"Reporte web"})]}),e.jsxs("button",{className:"export-option",onClick:()=>n("pdf"),children:[e.jsx(R,{size:16}),e.jsx("span",{children:"PDF"}),e.jsx("small",{children:"Documento profesional"})]}),e.jsxs("button",{className:"export-option",onClick:()=>n("xlsx"),children:[e.jsx(A,{size:16}),e.jsx("span",{children:"Excel"}),e.jsx("small",{children:"Hoja de cálculo"})]})]})]}),e.jsxs("div",{className:"export-section",children:[e.jsx("h4",{children:"Configuración"}),e.jsxs("button",{className:"btn-secondary full-width",onClick:c,children:[e.jsx(ie,{size:16}),"Configurar Análisis"]})]})]})]}):e.jsxs("div",{className:"no-analysis",children:[e.jsx(Q,{className:"no-analysis-icon"}),e.jsx("h3",{children:"Sin Análisis"}),e.jsx("p",{children:"Ejecuta un análisis para ver los resultados aquí"})]})})]}),s&&e.jsxs("div",{className:"panel-collapsed",children:[e.jsx("button",{className:"collapsed-btn",onClick:()=>{o("summary"),t()},title:"Resumen",children:e.jsx(Q,{size:20})}),e.jsx("button",{className:"collapsed-btn",onClick:()=>{o("export"),t()},title:"Exportar",children:e.jsx(X,{size:20})}),e.jsx("button",{className:"collapsed-btn",onClick:c,title:"Configuración",children:e.jsx(ie,{size:20})})]})]})},La=({collapsed:s,onToggle:t,logs:a,onClearLogs:n,isAnalyzing:c,analysisProgress:i})=>{const[o,l]=m.useState("all"),[r,u]=m.useState(""),j=m.useRef(null);m.useEffect(()=>{j.current&&j.current.scrollIntoView({behavior:"smooth"})},[a]);const x=h=>{switch(h){case"success":return e.jsx(U,{className:"log-icon success",size:14});case"warning":return e.jsx(O,{className:"log-icon warning",size:14});case"error":return e.jsx(Y,{className:"log-icon error",size:14});default:return e.jsx(W,{className:"log-icon info",size:14})}},g=a.filter(h=>{const p=o==="all"||h.type===o,E=r===""||h.message.toLowerCase().includes(r.toLowerCase());return p&&E}),v={all:a.length,info:a.filter(h=>h.type==="info").length,success:a.filter(h=>h.type==="success").length,warning:a.filter(h=>h.type==="warning").length,error:a.filter(h=>h.type==="error").length};return e.jsxs("div",{className:`bottom-panel ${s?"collapsed":""}`,children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("div",{className:"panel-title",children:[e.jsx(Se,{className:"panel-icon"}),e.jsx("span",{children:"Consola"}),c&&e.jsxs("div",{className:"analysis-indicator",children:[e.jsx(re,{className:"activity-icon",size:14}),e.jsx("span",{children:"Analizando..."})]})]}),e.jsxs("div",{className:"panel-controls",children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"log-filters",children:[e.jsxs("button",{className:`filter-btn ${o==="all"?"active":""}`,onClick:()=>l("all"),title:"Todos los logs",children:["Todos (",v.all,")"]}),e.jsxs("button",{className:`filter-btn ${o==="info"?"active":""}`,onClick:()=>l("info"),title:"Logs informativos",children:[e.jsx(W,{size:12}),v.info>0&&e.jsxs("span",{children:["(",v.info,")"]})]}),e.jsxs("button",{className:`filter-btn ${o==="success"?"active":""}`,onClick:()=>l("success"),title:"Logs de éxito",children:[e.jsx(U,{size:12}),v.success>0&&e.jsxs("span",{children:["(",v.success,")"]})]}),e.jsxs("button",{className:`filter-btn ${o==="warning"?"active":""}`,onClick:()=>l("warning"),title:"Logs de advertencia",children:[e.jsx(O,{size:12}),v.warning>0&&e.jsxs("span",{children:["(",v.warning,")"]})]}),e.jsxs("button",{className:`filter-btn ${o==="error"?"active":""}`,onClick:()=>l("error"),title:"Logs de error",children:[e.jsx(Y,{size:12}),v.error>0&&e.jsxs("span",{children:["(",v.error,")"]})]})]}),e.jsxs("div",{className:"search-box",children:[e.jsx(is,{size:14}),e.jsx("input",{type:"text",placeholder:"Buscar en logs...",value:r,onChange:h=>u(h.target.value)})]}),e.jsx("button",{className:"btn-icon",onClick:n,title:"Limpiar logs",disabled:a.length===0,children:e.jsx(wa,{size:14})})]}),e.jsx("button",{className:"panel-toggle",onClick:t,title:s?"Expandir consola":"Contraer consola",children:s?e.jsx(ja,{}):e.jsx(Le,{})})]})]}),c&&!s&&e.jsxs("div",{className:"analysis-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${i}%`}})}),e.jsxs("span",{className:"progress-text",children:[i,"% completado"]})]}),!s&&e.jsx("div",{className:"panel-content",children:e.jsx("div",{className:"logs-container",children:g.length===0?e.jsxs("div",{className:"no-logs",children:[e.jsx(Se,{className:"no-logs-icon"}),e.jsx("span",{children:a.length===0?"No hay logs disponibles":"No se encontraron logs con los filtros aplicados"})]}):e.jsxs("div",{className:"logs-list",children:[g.map(h=>e.jsxs("div",{className:`log-entry ${h.type}`,children:[e.jsxs("div",{className:"log-timestamp",children:[e.jsx(Ne,{size:12}),h.timestamp]}),e.jsxs("div",{className:"log-content",children:[x(h.type),e.jsx("span",{className:"log-message",children:h.message})]})]},h.id)),e.jsx("div",{ref:j})]})})}),s&&e.jsx("div",{className:"panel-collapsed-content",children:e.jsxs("div",{className:"collapsed-stats",children:[e.jsxs("span",{className:"stat-item",children:[e.jsx(Se,{size:14}),a.length," logs"]}),v.error>0&&e.jsxs("span",{className:"stat-item error",children:[e.jsx(Y,{size:14}),v.error," errores"]}),v.warning>0&&e.jsxs("span",{className:"stat-item warning",children:[e.jsx(O,{size:14}),v.warning," advertencias"]}),c&&e.jsxs("span",{className:"stat-item analyzing",children:[e.jsx(re,{size:14}),"Analizando ",i,"%"]})]})})]})},Da=({isOpen:s,onClose:t,onSave:a})=>{const[n,c]=m.useState({name:"",type:"mysql",host:"localhost",port:"3306",database:"",username:"",password:"",ssl:!1,timeout:30}),[i,o]=m.useState(!1),[l,r]=m.useState(null),u=[{value:"mysql",label:"MySQL",defaultPort:"3306"},{value:"postgresql",label:"PostgreSQL",defaultPort:"5432"},{value:"sql_server",label:"SQL Server",defaultPort:"1433"},{value:"oracle",label:"Oracle",defaultPort:"1521"},{value:"sqlite",label:"SQLite",defaultPort:""},{value:"mongodb",label:"MongoDB",defaultPort:"27017"},{value:"redis",label:"Redis",defaultPort:"6379"},{value:"bigquery",label:"BigQuery",defaultPort:""},{value:"snowflake",label:"Snowflake",defaultPort:""},{value:"clickhouse",label:"ClickHouse",defaultPort:"9000"}],j=h=>{const{name:p,value:E,type:z,checked:y}=h.target;c(d=>({...d,[p]:z==="checkbox"?y:E}))},x=h=>{const p=h.target.value,E=u.find(z=>z.value===p);c(z=>({...z,type:p,port:(E==null?void 0:E.defaultPort)||z.port}))},g=async()=>{o(!0),r(null);try{await new Promise(p=>setTimeout(p,2e3));const h=Math.random()>.3;r({success:h,message:h?"Conexión exitosa":"Error de conexión: No se pudo conectar al servidor"})}catch(h){r({success:!1,message:`Error: ${h.message}`})}finally{o(!1)}},v=h=>{if(h.preventDefault(),!n.name.trim()){alert("Por favor ingresa un nombre para la conexión");return}a({...n,id:Date.now(),status:"disconnected",createdAt:new Date().toISOString()}),c({name:"",type:"mysql",host:"localhost",port:"3306",database:"",username:"",password:"",ssl:!1,timeout:30}),r(null)};return s?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-container large",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title",children:[e.jsx(A,{size:20}),e.jsx("span",{children:"Nueva Conexión de Base de Datos"})]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx(ee,{size:20})})]}),e.jsxs("form",{onSubmit:v,className:"modal-content",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsxs("label",{htmlFor:"name",children:[e.jsx(Ue,{size:16}),"Nombre de la Conexión"]}),e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:j,placeholder:"Mi Base de Datos",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"type",children:[e.jsx(A,{size:16}),"Tipo de Base de Datos"]}),e.jsx("select",{id:"type",name:"type",value:n.type,onChange:x,children:u.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"host",children:[e.jsx(fa,{size:16}),"Servidor"]}),e.jsx("input",{type:"text",id:"host",name:"host",value:n.host,onChange:j,placeholder:"localhost",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"port",children:[e.jsx(va,{size:16}),"Puerto"]}),e.jsx("input",{type:"number",id:"port",name:"port",value:n.port,onChange:j,placeholder:"3306"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"database",children:[e.jsx(A,{size:16}),"Base de Datos"]}),e.jsx("input",{type:"text",id:"database",name:"database",value:n.database,onChange:j,placeholder:"nombre_bd"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"username",children:[e.jsx(Ue,{size:16}),"Usuario"]}),e.jsx("input",{type:"text",id:"username",name:"username",value:n.username,onChange:j,placeholder:"usuario"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"password",children:[e.jsx(ga,{size:16}),"Contraseña"]}),e.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:j,placeholder:"••••••••"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"timeout",children:"Timeout (segundos)"}),e.jsx("input",{type:"number",id:"timeout",name:"timeout",value:n.timeout,onChange:j,min:"5",max:"300"})]}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"ssl",checked:n.ssl,onChange:j}),e.jsx("span",{className:"checkbox-custom"}),"Usar SSL/TLS"]})})]}),e.jsxs("div",{className:"connection-test",children:[e.jsxs("button",{type:"button",className:"btn-secondary",onClick:g,disabled:i,children:[e.jsx(ka,{size:16}),i?"Probando...":"Probar Conexión"]}),l&&e.jsxs("div",{className:`test-result ${l.success?"success":"error"}`,children:[l.success?e.jsx(U,{size:16}):e.jsx(es,{size:16}),e.jsx("span",{children:l.message})]})]}),e.jsxs("div",{className:"connection-preview",children:[e.jsx("h4",{children:"Cadena de Conexión:"}),e.jsxs("code",{children:[n.type,"://",n.username&&`${n.username}:***@`,n.host,":",n.port,"/",n.database,n.ssl?"?ssl=true":""]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:t,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"btn-primary",onClick:v,disabled:!n.name.trim(),children:[e.jsx(ts,{size:16}),"Guardar Conexión"]})]})]})}):null},Ma=({isOpen:s,onClose:t,onAnalyze:a})=>{var g,v;const[n,c]=m.useState({databaseEngine:"auto_detect",analysisTypes:{syntax:!0,semantic:!0,performance:!0,security:!0,schema:!1,dataQuality:!1},options:{includeRecommendations:!0,generateCorrectedSQL:!0,detailedReporting:!0,includeSchemaAnalysis:!1},performance:{checkSelectStar:!0,checkMissingIndexes:!0,checkSlowQueries:!0,checkJoinOptimization:!0},security:{checkSQLInjection:!0,checkPrivilegeEscalation:!0,checkDataExposure:!0,checkWeakAuthentication:!1}}),i=[{value:"auto_detect",label:"Auto-detectar",description:"Detectar automáticamente el motor de BD"},{value:"mysql",label:"MySQL",description:"MySQL 5.7+"},{value:"postgresql",label:"PostgreSQL",description:"PostgreSQL 10+"},{value:"sql_server",label:"SQL Server",description:"Microsoft SQL Server 2016+"},{value:"oracle",label:"Oracle",description:"Oracle Database 12c+"},{value:"sqlite",label:"SQLite",description:"SQLite 3.x"},{value:"mongodb",label:"MongoDB",description:"MongoDB 4.0+"},{value:"bigquery",label:"BigQuery",description:"Google BigQuery"},{value:"snowflake",label:"Snowflake",description:"Snowflake Data Warehouse"},{value:"clickhouse",label:"ClickHouse",description:"ClickHouse OLAP"}],o={syntax:{icon:e.jsx(R,{size:16}),title:"Análisis de Sintaxis",description:"Detecta errores de sintaxis SQL y problemas de formato"},semantic:{icon:e.jsx(A,{size:16}),title:"Análisis Semántico",description:"Verifica la lógica y coherencia de las consultas"},performance:{icon:e.jsx(ce,{size:16}),title:"Análisis de Rendimiento",description:"Identifica problemas de rendimiento y optimizaciones"},security:{icon:e.jsx(fe,{size:16}),title:"Análisis de Seguridad",description:"Detecta vulnerabilidades y riesgos de seguridad"},schema:{icon:e.jsx(A,{size:16}),title:"Análisis de Esquema",description:"Analiza la estructura de la base de datos"},dataQuality:{icon:e.jsx(Pe,{size:16}),title:"Calidad de Datos",description:"Evalúa la integridad y calidad de los datos"}},l=h=>{c(p=>({...p,analysisTypes:{...p.analysisTypes,[h]:!p.analysisTypes[h]}}))},r=(h,p)=>{c(E=>({...E,[h]:{...E[h],[p]:!E[h][p]}}))},u=h=>{c(p=>({...p,databaseEngine:h.target.value}))},j=()=>{const h={database_engine:n.databaseEngine,analysis_types:Object.keys(n.analysisTypes).filter(p=>n.analysisTypes[p]).join(","),options:n.options,performance_checks:n.performance,security_checks:n.security};a(h)},x=()=>Object.values(n.analysisTypes).filter(Boolean).length;return s?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-container large",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title",children:[e.jsx(ie,{size:20}),e.jsx("span",{children:"Configuración de Análisis"})]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx(ee,{size:20})})]}),e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Motor de Base de Datos"}),e.jsxs("div",{className:"database-engine-selector",children:[e.jsx("select",{value:n.databaseEngine,onChange:u,className:"engine-select",children:i.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}),e.jsx("div",{className:"engine-description",children:(g=i.find(h=>h.value===n.databaseEngine))==null?void 0:g.description})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("h3",{children:["Tipos de Análisis (",x()," seleccionados)"]}),e.jsx("div",{className:"analysis-types-grid",children:Object.entries(o).map(([h,p])=>e.jsxs("div",{className:`analysis-type-card ${n.analysisTypes[h]?"selected":""}`,onClick:()=>l(h),children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"card-icon",children:p.icon}),e.jsx("div",{className:"card-checkbox",children:n.analysisTypes[h]?e.jsx(Pe,{size:16}):e.jsx(ba,{size:16})})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("h4",{children:p.title}),e.jsx("p",{children:p.description})]})]},h))})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Opciones Generales"}),e.jsxs("div",{className:"options-grid",children:[e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.options.includeRecommendations,onChange:()=>r("options","includeRecommendations")}),e.jsx("span",{className:"option-label",children:"Incluir recomendaciones"}),e.jsx("span",{className:"option-description",children:"Generar sugerencias de mejora"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.options.generateCorrectedSQL,onChange:()=>r("options","generateCorrectedSQL")}),e.jsx("span",{className:"option-label",children:"Generar SQL corregido"}),e.jsx("span",{className:"option-description",children:"Crear versión optimizada del código"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.options.detailedReporting,onChange:()=>r("options","detailedReporting")}),e.jsx("span",{className:"option-label",children:"Reporte detallado"}),e.jsx("span",{className:"option-description",children:"Incluir información técnica completa"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.options.includeSchemaAnalysis,onChange:()=>r("options","includeSchemaAnalysis")}),e.jsx("span",{className:"option-label",children:"Análisis de esquema"}),e.jsx("span",{className:"option-description",children:"Analizar estructura de tablas y relaciones"})]})]})]}),n.analysisTypes.performance&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Opciones de Rendimiento"}),e.jsxs("div",{className:"options-grid",children:[e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.performance.checkSelectStar,onChange:()=>r("performance","checkSelectStar")}),e.jsx("span",{className:"option-label",children:"Detectar SELECT *"}),e.jsx("span",{className:"option-description",children:"Identificar consultas con SELECT *"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.performance.checkMissingIndexes,onChange:()=>r("performance","checkMissingIndexes")}),e.jsx("span",{className:"option-label",children:"Índices faltantes"}),e.jsx("span",{className:"option-description",children:"Sugerir índices para mejorar rendimiento"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.performance.checkSlowQueries,onChange:()=>r("performance","checkSlowQueries")}),e.jsx("span",{className:"option-label",children:"Consultas lentas"}),e.jsx("span",{className:"option-description",children:"Identificar consultas potencialmente lentas"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.performance.checkJoinOptimization,onChange:()=>r("performance","checkJoinOptimization")}),e.jsx("span",{className:"option-label",children:"Optimización de JOINs"}),e.jsx("span",{className:"option-description",children:"Analizar eficiencia de las uniones"})]})]})]}),n.analysisTypes.security&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Opciones de Seguridad"}),e.jsxs("div",{className:"options-grid",children:[e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.security.checkSQLInjection,onChange:()=>r("security","checkSQLInjection")}),e.jsx("span",{className:"option-label",children:"Inyección SQL"}),e.jsx("span",{className:"option-description",children:"Detectar vulnerabilidades de inyección"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.security.checkPrivilegeEscalation,onChange:()=>r("security","checkPrivilegeEscalation")}),e.jsx("span",{className:"option-label",children:"Escalación de privilegios"}),e.jsx("span",{className:"option-description",children:"Identificar riesgos de permisos"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.security.checkDataExposure,onChange:()=>r("security","checkDataExposure")}),e.jsx("span",{className:"option-label",children:"Exposición de datos"}),e.jsx("span",{className:"option-description",children:"Detectar posible filtración de información"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:n.security.checkWeakAuthentication,onChange:()=>r("security","checkWeakAuthentication")}),e.jsx("span",{className:"option-label",children:"Autenticación débil"}),e.jsx("span",{className:"option-description",children:"Verificar configuraciones de seguridad"})]})]})]}),e.jsx("div",{className:"analysis-summary",children:e.jsxs("div",{className:"summary-info",children:[e.jsx(W,{size:16}),e.jsxs("span",{children:["Se ejecutarán ",x()," tipos de análisis en el motor "," ",(v=i.find(h=>h.value===n.databaseEngine))==null?void 0:v.label]})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:t,children:"Cancelar"}),e.jsxs("button",{type:"button",className:"btn-primary",onClick:j,disabled:x()===0,children:[e.jsx(De,{size:16}),"Ejecutar Análisis"]})]})]})}):null},Aa=({isOpen:s,onClose:t,onExport:a,currentAnalysis:n})=>{var S,w,k,L;const[c,i]=m.useState("json"),[o,l]=m.useState({includeCharts:!0,includeImages:!1,includeRawData:!0,includeRecommendations:!0,includeSchema:!1,compressionLevel:"medium"}),[r,u]=m.useState([]),[j,x]=m.useState(!1);m.useEffect(()=>{s&&g()},[s]);const g=async()=>{try{const T=await(await fetch("/api/export/formats")).json();u(T.formats||[])}catch(f){console.error("Error loading export formats:",f),u([{format:"json",name:"JSON Data",category:"data",description:"Structured JSON format for API integration",file_extension:"json",supports_charts:!1,supports_images:!1,supports_styling:!1,is_binary:!1},{format:"html",name:"HTML Document",category:"document",description:"Interactive HTML report with embedded CSS",file_extension:"html",supports_charts:!0,supports_images:!0,supports_styling:!0,is_binary:!1},{format:"pdf",name:"PDF Document",category:"document",description:"Professional PDF report with styling",file_extension:"pdf",supports_charts:!0,supports_images:!0,supports_styling:!0,is_binary:!0},{format:"xlsx",name:"Excel Workbook",category:"spreadsheet",description:"Multi-sheet Excel workbook",file_extension:"xlsx",supports_charts:!0,supports_images:!0,supports_styling:!0,is_binary:!0}])}},v={document:{icon:e.jsx(R,{size:16}),label:"Documentos",color:"blue"},spreadsheet:{icon:e.jsx(A,{size:16}),label:"Hojas de Cálculo",color:"green"},data:{icon:e.jsx(ue,{size:16}),label:"Datos",color:"purple"},presentation:{icon:e.jsx(Qe,{size:16}),label:"Presentaciones",color:"orange"},archive:{icon:e.jsx(Ie,{size:16}),label:"Archivos",color:"gray"},specialized:{icon:e.jsx(ie,{size:16}),label:"Especializados",color:"teal"}},h=r.reduce((f,T)=>{const $=T.category||"data";return f[$]||(f[$]=[]),f[$].push(T),f},{}),p=r.find(f=>f.format===c),E=async()=>{if(!n){alert("No hay análisis disponible para exportar");return}x(!0);try{await a(c,o)}catch(f){console.error("Export error:",f),alert("Error durante la exportación")}finally{x(!1)}},z=f=>{l(T=>({...T,[f]:!T[f]}))},y=f=>{switch(f.category){case"document":return e.jsx(R,{size:20});case"spreadsheet":return e.jsx(A,{size:20});case"presentation":return e.jsx(Qe,{size:20});case"archive":return e.jsx(Ie,{size:20});case"data":return e.jsx(ue,{size:20});default:return e.jsx(R,{size:20})}},d=f=>f?e.jsx(U,{className:"feature-supported",size:14}):e.jsx(ee,{className:"feature-not-supported",size:14});return s?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-container large",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title",children:[e.jsx(X,{size:20}),e.jsx("span",{children:"Exportar Análisis"})]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx(ee,{size:20})})]}),e.jsx("div",{className:"modal-content",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"export-section",children:[e.jsx("h3",{children:"Seleccionar Formato"}),e.jsx("div",{className:"format-categories",children:Object.entries(h).map(([f,T])=>{var $,B;return e.jsxs("div",{className:"format-category",children:[e.jsxs("div",{className:"category-header",children:[($=v[f])==null?void 0:$.icon,e.jsx("span",{children:((B=v[f])==null?void 0:B.label)||f}),e.jsxs("span",{className:"format-count",children:["(",T.length,")"]})]}),e.jsx("div",{className:"format-grid",children:T.map(_=>e.jsxs("div",{className:`format-card ${c===_.format?"selected":""}`,onClick:()=>i(_.format),children:[e.jsx("div",{className:"format-icon",children:y(_)}),e.jsxs("div",{className:"format-info",children:[e.jsx("h4",{children:_.name}),e.jsx("p",{children:_.description}),e.jsxs("div",{className:"format-features",children:[e.jsxs("span",{className:"feature",children:[d(_.supports_charts),"Gráficos"]}),e.jsxs("span",{className:"feature",children:[d(_.supports_styling),"Estilos"]}),e.jsxs("span",{className:"feature",children:[d(!_.is_binary),"Texto"]})]})]})]},_.format))})]},f)})})]}),p&&e.jsxs("div",{className:"export-section",children:[e.jsx("h3",{children:"Detalles del Formato"}),e.jsxs("div",{className:"format-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Formato:"})," ",p.name]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Extensión:"})," .",p.file_extension]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Categoría:"})," ",(S=v[p.category])==null?void 0:S.label]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Descripción:"})," ",p.description]})]})]}),e.jsxs("div",{className:"export-section",children:[e.jsx("h3",{children:"Opciones de Exportación"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:o.includeCharts,onChange:()=>z("includeCharts"),disabled:!(p!=null&&p.supports_charts)}),e.jsx("span",{className:"option-label",children:"Incluir gráficos"}),e.jsx("span",{className:"option-description",children:"Agregar visualizaciones de datos"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:o.includeImages,onChange:()=>z("includeImages"),disabled:!(p!=null&&p.supports_images)}),e.jsx("span",{className:"option-label",children:"Incluir imágenes"}),e.jsx("span",{className:"option-description",children:"Agregar capturas y diagramas"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:o.includeRawData,onChange:()=>z("includeRawData")}),e.jsx("span",{className:"option-label",children:"Incluir datos sin procesar"}),e.jsx("span",{className:"option-description",children:"Datos técnicos completos"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:o.includeRecommendations,onChange:()=>z("includeRecommendations")}),e.jsx("span",{className:"option-label",children:"Incluir recomendaciones"}),e.jsx("span",{className:"option-description",children:"Sugerencias de mejora"})]}),e.jsxs("label",{className:"option-item",children:[e.jsx("input",{type:"checkbox",checked:o.includeSchema,onChange:()=>z("includeSchema")}),e.jsx("span",{className:"option-label",children:"Incluir información de esquema"}),e.jsx("span",{className:"option-description",children:"Estructura de base de datos"})]})]}),(p==null?void 0:p.category)==="archive"&&e.jsxs("div",{className:"compression-options",children:[e.jsx("h4",{children:"Nivel de Compresión"}),e.jsxs("div",{className:"compression-selector",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"compression",value:"low",checked:o.compressionLevel==="low",onChange:f=>l(T=>({...T,compressionLevel:f.target.value}))}),"Bajo (rápido)"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"compression",value:"medium",checked:o.compressionLevel==="medium",onChange:f=>l(T=>({...T,compressionLevel:f.target.value}))}),"Medio (balanceado)"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"compression",value:"high",checked:o.compressionLevel==="high",onChange:f=>l(T=>({...T,compressionLevel:f.target.value}))}),"Alto (máxima compresión)"]})]})]})]}),e.jsxs("div",{className:"export-section",children:[e.jsx("h3",{children:"Vista Previa"}),e.jsxs("div",{className:"export-preview",children:[e.jsxs("div",{className:"preview-info",children:[e.jsx(W,{size:16}),e.jsxs("span",{children:['Se exportará el análisis de "',n.filename,'" en formato ',p==null?void 0:p.name,"(",Math.round((n.file_size||0)/1024),"KB)"]})]}),e.jsxs("div",{className:"preview-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("strong",{children:"Errores:"})," ",((w=n.summary)==null?void 0:w.total_errors)||0]}),e.jsxs("div",{className:"stat",children:[e.jsx("strong",{children:"Rendimiento:"})," ",((k=n.summary)==null?void 0:k.performance_score)||100,"%"]}),e.jsxs("div",{className:"stat",children:[e.jsx("strong",{children:"Seguridad:"})," ",((L=n.summary)==null?void 0:L.security_score)||100,"%"]})]})]})]})]}):e.jsxs("div",{className:"no-analysis-warning",children:[e.jsx(es,{size:48}),e.jsx("h3",{children:"No hay análisis disponible"}),e.jsx("p",{children:"Ejecuta un análisis antes de exportar los resultados"})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:t,children:"Cancelar"}),e.jsxs("button",{type:"button",className:"btn-primary",onClick:E,disabled:!n||j,children:[e.jsx(X,{size:16}),j?"Exportando...":"Exportar"]})]})]})}):null},$a=s=>{m.useEffect(()=>{const t=a=>{const{ctrlKey:n,metaKey:c,shiftKey:i,altKey:o,key:l}=a,r=n||c;(()=>!!(r&&l==="s"||r&&l==="Enter"||r&&i&&l==="E"||r&&i&&l==="M"||r&&i&&l==="C"||r&&l==="t"||r&&l==="w"||l==="F5"||l==="F9"||l==="F10"||l==="F11"))()&&a.preventDefault();try{if(r&&l==="s"&&s.onSave&&s.onSave(),r&&l==="Enter"&&s.onAnalyze&&s.onAnalyze(),l==="F5"&&s.onAnalyze&&s.onAnalyze(),r&&i&&l==="E"&&s.onExport&&s.onExport(),r&&i&&l==="M"&&s.onOpenMetrics&&s.onOpenMetrics(),r&&i&&l==="C"&&s.onOpenConnection&&s.onOpenConnection(),r&&l==="t"&&s.onNewTab&&s.onNewTab(),r&&l==="w"&&s.onCloseTab&&s.onCloseTab(),r&&l>="1"&&l<="9"&&s.onSelectTab){const j=parseInt(l)-1;s.onSelectTab(j)}l==="F9"&&s.onToggleSidebar&&s.onToggleSidebar(),l==="F10"&&s.onToggleRightPanel&&s.onToggleRightPanel(),l==="F11"&&s.onToggleBottomPanel&&s.onToggleBottomPanel(),r&&l==="1"&&s.onSetViewMode&&s.onSetViewMode("editor"),r&&l==="2"&&s.onSetViewMode&&s.onSetViewMode("split"),r&&l==="3"&&s.onSetViewMode&&s.onSetViewMode("results"),r&&l==="f"&&s.onFind&&s.onFind(),r&&l==="h"&&s.onReplace&&s.onReplace(),r&&i&&l==="F"&&s.onFormat&&s.onFormat(),r&&l==="/"&&s.onToggleComment&&s.onToggleComment(),r&&i&&l==="D"&&s.onDuplicateLine&&s.onDuplicateLine(),o&&l==="ArrowUp"&&s.onMoveLineUp&&s.onMoveLineUp(),o&&l==="ArrowDown"&&s.onMoveLineDown&&s.onMoveLineDown(),r&&l==="="&&s.onZoomIn&&s.onZoomIn(),r&&l==="-"&&s.onZoomOut&&s.onZoomOut(),r&&l==="0"&&s.onZoomReset&&s.onZoomReset(),l==="F1"&&s.onShowHelp&&s.onShowHelp(),r&&i&&l==="P"&&s.onCommandPalette&&s.onCommandPalette()}catch(j){console.error("Keyboard shortcut error:",j)}};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[s])},_a=s=>{const t=navigator.platform.toUpperCase().indexOf("MAC")>=0,a=t?"⌘":"Ctrl",n=t?"⌥":"Alt",c="⇧";return{save:`${a}+S`,analyze:`${a}+Enter`,analyzeF5:"F5",export:`${a}+${c}+E`,metrics:`${a}+${c}+M`,connection:`${a}+${c}+C`,newTab:`${a}+T`,closeTab:`${a}+W`,toggleSidebar:"F9",toggleRightPanel:"F10",toggleBottomPanel:"F11",viewEditor:`${a}+1`,viewSplit:`${a}+2`,viewResults:`${a}+3`,find:`${a}+F`,replace:`${a}+H`,format:`${a}+${c}+F`,comment:`${a}+/`,duplicate:`${a}+${c}+D`,moveUp:`${n}+↑`,moveDown:`${n}+↓`,zoomIn:`${a}+=`,zoomOut:`${a}+-`,zoomReset:`${a}+0`,help:"F1",commandPalette:`${a}+${c}+P`}[s]||s},Ra=()=>[{category:"Archivo",shortcuts:[{key:"save",description:"Guardar archivo actual"},{key:"newTab",description:"Nueva pestaña"},{key:"closeTab",description:"Cerrar pestaña actual"}]},{category:"Análisis",shortcuts:[{key:"analyze",description:"Analizar SQL"},{key:"analyzeF5",description:"Analizar SQL (alternativo)"},{key:"export",description:"Exportar resultados"}]},{category:"Vista",shortcuts:[{key:"viewEditor",description:"Vista de editor"},{key:"viewSplit",description:"Vista dividida"},{key:"viewResults",description:"Vista de resultados"},{key:"toggleSidebar",description:"Alternar barra lateral"},{key:"toggleRightPanel",description:"Alternar panel derecho"},{key:"toggleBottomPanel",description:"Alternar panel inferior"}]},{category:"Edición",shortcuts:[{key:"find",description:"Buscar"},{key:"replace",description:"Buscar y reemplazar"},{key:"format",description:"Formatear SQL"},{key:"comment",description:"Comentar/descomentar"},{key:"duplicate",description:"Duplicar línea"},{key:"moveUp",description:"Mover línea arriba"},{key:"moveDown",description:"Mover línea abajo"}]},{category:"Sistema",shortcuts:[{key:"metrics",description:"Dashboard de métricas"},{key:"connection",description:"Configurar conexión"},{key:"help",description:"Ayuda"},{key:"commandPalette",description:"Paleta de comandos"}]},{category:"Zoom",shortcuts:[{key:"zoomIn",description:"Aumentar zoom"},{key:"zoomOut",description:"Disminuir zoom"},{key:"zoomReset",description:"Restablecer zoom"}]}],Oa=({isOpen:s,onClose:t})=>{var o;const[a,n]=m.useState("shortcuts");if(!s)return null;const c=Ra(),i={shortcuts:{title:"Atajos de Teclado",icon:e.jsx(Na,{size:20}),content:e.jsxs("div",{className:"shortcuts-content",children:[e.jsx("p",{className:"help-description",children:"Utiliza estos atajos de teclado para trabajar más eficientemente con SQL Analyzer Enterprise."}),c.map((l,r)=>e.jsxs("div",{className:"shortcut-category",children:[e.jsx("h4",{className:"category-title",children:l.category}),e.jsx("div",{className:"shortcuts-list",children:l.shortcuts.map((u,j)=>e.jsxs("div",{className:"shortcut-item",children:[e.jsx("div",{className:"shortcut-keys",children:e.jsx("kbd",{className:"shortcut-key",children:_a(u.key)})}),e.jsx("div",{className:"shortcut-description",children:u.description})]},j))})]},r))]})},features:{title:"Características",icon:e.jsx(ce,{size:20}),content:e.jsxs("div",{className:"features-content",children:[e.jsx("h4",{children:"Análisis SQL Enterprise"}),e.jsxs("ul",{className:"feature-list",children:[e.jsx("li",{children:"Soporte para 22+ motores de base de datos"}),e.jsx("li",{children:"Análisis sintáctico, semántico y de rendimiento"}),e.jsx("li",{children:"Detección de vulnerabilidades de seguridad"}),e.jsx("li",{children:"Corrección automática de errores"}),e.jsx("li",{children:"Puntuación de confianza con ML"})]}),e.jsx("h4",{children:"Sistema de Exportación"}),e.jsxs("ul",{className:"feature-list",children:[e.jsx("li",{children:"38+ formatos de exportación disponibles"}),e.jsx("li",{children:"Documentos: PDF, HTML, Word, RTF, LaTeX"}),e.jsx("li",{children:"Datos: JSON, XML, CSV, Excel, Parquet"}),e.jsx("li",{children:"Especializados: OpenAPI, GraphQL, Swagger"}),e.jsx("li",{children:"Componentes web: React, Vue, Angular"})]}),e.jsx("h4",{children:"Interfaz Enterprise"}),e.jsxs("ul",{className:"feature-list",children:[e.jsx("li",{children:"Diseño full-screen profesional"}),e.jsx("li",{children:"Editor de código avanzado"}),e.jsx("li",{children:"Dashboard de métricas en tiempo real"}),e.jsx("li",{children:"Sistema de notificaciones"}),e.jsx("li",{children:"Gestión de pestañas múltiples"})]})]})},databases:{title:"Bases de Datos",icon:e.jsx(A,{size:20}),content:e.jsxs("div",{className:"databases-content",children:[e.jsx("h4",{children:"Motores Soportados"}),e.jsxs("div",{className:"db-category",children:[e.jsx("h5",{children:"SQL Relacionales"}),e.jsxs("div",{className:"db-list",children:[e.jsx("span",{className:"db-item",children:"MySQL"}),e.jsx("span",{className:"db-item",children:"PostgreSQL"}),e.jsx("span",{className:"db-item",children:"SQL Server"}),e.jsx("span",{className:"db-item",children:"Oracle"}),e.jsx("span",{className:"db-item",children:"MariaDB"}),e.jsx("span",{className:"db-item",children:"SQLite"})]})]}),e.jsxs("div",{className:"db-category",children:[e.jsx("h5",{children:"NoSQL"}),e.jsxs("div",{className:"db-list",children:[e.jsx("span",{className:"db-item",children:"MongoDB"}),e.jsx("span",{className:"db-item",children:"Redis"}),e.jsx("span",{className:"db-item",children:"Neo4j"}),e.jsx("span",{className:"db-item",children:"ArangoDB"})]})]}),e.jsxs("div",{className:"db-category",children:[e.jsx("h5",{children:"Especializadas"}),e.jsxs("div",{className:"db-list",children:[e.jsx("span",{className:"db-item",children:"InfluxDB"}),e.jsx("span",{className:"db-item",children:"TimescaleDB"}),e.jsx("span",{className:"db-item",children:"Elasticsearch"}),e.jsx("span",{className:"db-item",children:"ClickHouse"}),e.jsx("span",{className:"db-item",children:"BigQuery"})]})]}),e.jsxs("div",{className:"db-category",children:[e.jsx("h5",{children:"Embebidas"}),e.jsxs("div",{className:"db-list",children:[e.jsx("span",{className:"db-item",children:"H2"}),e.jsx("span",{className:"db-item",children:"DuckDB"}),e.jsx("span",{className:"db-item",children:"SQLite"})]})]})]})},about:{title:"Acerca de",icon:e.jsx(W,{size:20}),content:e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"app-info",children:[e.jsx("h4",{children:"SQL Analyzer Enterprise"}),e.jsx("p",{className:"version",children:"Versión 2.0.0"}),e.jsx("p",{className:"description",children:"Plataforma enterprise de análisis SQL con soporte para múltiples motores de base de datos, análisis avanzado y sistema de exportación completo."})]}),e.jsxs("div",{className:"tech-stack",children:[e.jsx("h4",{children:"Tecnologías"}),e.jsxs("ul",{className:"tech-list",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Frontend:"})," React 18, Vite, Lucide Icons"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Backend:"})," Python 3.11, Flask, SQLAlchemy"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Análisis:"})," Motor SQL personalizado, ML"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Exportación:"})," 38+ formatos soportados"]})]})]}),e.jsxs("div",{className:"capabilities",children:[e.jsx("h4",{children:"Capacidades Enterprise"}),e.jsxs("ul",{className:"capability-list",children:[e.jsx("li",{children:"✅ 22+ motores de base de datos"}),e.jsx("li",{children:"✅ 38+ formatos de exportación"}),e.jsx("li",{children:"✅ Análisis en tiempo real"}),e.jsx("li",{children:"✅ Dashboard de métricas"}),e.jsx("li",{children:"✅ Sistema de notificaciones"}),e.jsx("li",{children:"✅ Atajos de teclado"}),e.jsx("li",{children:"✅ Interfaz responsive"}),e.jsx("li",{children:"✅ Arquitectura escalable"})]})]}),e.jsxs("div",{className:"links",children:[e.jsx("h4",{children:"Enlaces"}),e.jsxs("div",{className:"link-list",children:[e.jsxs("a",{href:"#",className:"help-link",children:[e.jsx(R,{size:16}),"Documentación",e.jsx(Fe,{size:14})]}),e.jsxs("a",{href:"#",className:"help-link",children:[e.jsx(ie,{size:16}),"Configuración",e.jsx(Fe,{size:14})]})]})]})]})}};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-container large",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title",children:[e.jsx(ua,{size:20}),e.jsx("span",{children:"Ayuda y Documentación"})]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx(ee,{size:20})})]}),e.jsxs("div",{className:"help-modal-content",children:[e.jsx("div",{className:"help-tabs",children:Object.entries(i).map(([l,r])=>e.jsxs("button",{className:`help-tab ${a===l?"active":""}`,onClick:()=>n(l),children:[r.icon,e.jsx("span",{children:r.title})]},l))}),e.jsx("div",{className:"help-content",children:(o=i[a])==null?void 0:o.content})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn-secondary",onClick:t,children:"Cerrar"})})]})})},Ia=({isVisible:s,onClose:t})=>{const[a,n]=m.useState(null),[c,i]=m.useState(!0),[o,l]=m.useState(null);m.useEffect(()=>{if(s){r();const x=setInterval(r,5e3);return()=>clearInterval(x)}},[s]);const r=async()=>{try{const x=await fetch("/api/metrics/dashboard");if(x.ok){const g=await x.json();n(g),l(null)}else throw new Error("Failed to fetch metrics")}catch(x){l(x.message)}finally{i(!1)}},u=x=>{switch(x){case"healthy":return"text-green-500";case"warning":return"text-yellow-500";case"critical":return"text-red-500";default:return"text-gray-500"}},j=x=>{switch(x){case"healthy":return e.jsx(U,{className:"w-5 h-5"});case"warning":return e.jsx(O,{className:"w-5 h-5"});case"critical":return e.jsx(O,{className:"w-5 h-5"});default:return e.jsx(re,{className:"w-5 h-5"})}};return s?e.jsx("div",{className:"metrics-dashboard-overlay",children:e.jsxs("div",{className:"metrics-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"dashboard-title",children:[e.jsx(Q,{size:24}),e.jsx("h2",{children:"Métricas del Sistema"})]}),e.jsx("button",{className:"close-button",onClick:t,children:"×"})]}),e.jsx("div",{className:"dashboard-content",children:c?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando métricas..."})]}):o?e.jsxs("div",{className:"error-state",children:[e.jsx(O,{size:48}),e.jsxs("p",{children:["Error al cargar métricas: ",o]}),e.jsx("button",{onClick:r,className:"retry-button",children:"Reintentar"})]}):a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"metrics-overview",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:e.jsx(R,{className:"w-6 h-6"})}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-value",children:a.overview.total_analyses}),e.jsx("div",{className:"metric-label",children:"Análisis Totales"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:e.jsx(ye,{className:"w-6 h-6"})}),e.jsxs("div",{className:"metric-content",children:[e.jsxs("div",{className:"metric-value",children:[a.overview.success_rate.toFixed(1),"%"]}),e.jsx("div",{className:"metric-label",children:"Tasa de Éxito"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:e.jsx(Ne,{className:"w-6 h-6"})}),e.jsxs("div",{className:"metric-content",children:[e.jsxs("div",{className:"metric-value",children:[a.overview.avg_processing_time.toFixed(2),"s"]}),e.jsx("div",{className:"metric-label",children:"Tiempo Promedio"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:`metric-icon ${u(a.overview.system_status)}`,children:j(a.overview.system_status)}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-value",children:a.overview.system_status}),e.jsx("div",{className:"metric-label",children:"Estado del Sistema"})]})]})]}),e.jsxs("div",{className:"real-time-section",children:[e.jsx("h3",{children:"Métricas en Tiempo Real"}),e.jsxs("div",{className:"real-time-grid",children:[e.jsxs("div",{className:"real-time-card",children:[e.jsxs("div",{className:"real-time-header",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{children:"Análisis Activos"})]}),e.jsx("div",{className:"real-time-value",children:a.real_time.active_analyses})]}),e.jsxs("div",{className:"real-time-card",children:[e.jsxs("div",{className:"real-time-header",children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{children:"CPU"})]}),e.jsxs("div",{className:"real-time-value",children:[a.real_time.cpu_usage.toFixed(1),"%"]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${a.real_time.cpu_usage}%`}})})]}),e.jsxs("div",{className:"real-time-card",children:[e.jsxs("div",{className:"real-time-header",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:"Memoria"})]}),e.jsxs("div",{className:"real-time-value",children:[a.real_time.memory_usage.toFixed(1),"%"]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${a.real_time.memory_usage}%`}})})]}),e.jsxs("div",{className:"real-time-card",children:[e.jsxs("div",{className:"real-time-header",children:[e.jsx(fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Tasa de Error"})]}),e.jsxs("div",{className:"real-time-value",children:[a.real_time.error_rate.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"trends-section",children:[e.jsx("h3",{children:"Tendencias de Uso"}),e.jsxs("div",{className:"trends-grid",children:[e.jsxs("div",{className:"trend-card",children:[e.jsx("h4",{children:"Motores de Base de Datos"}),e.jsx("div",{className:"trend-list",children:Object.entries(a.trends.database_engines).sort(([,x],[,g])=>g-x).slice(0,5).map(([x,g])=>e.jsxs("div",{className:"trend-item",children:[e.jsx("span",{className:"trend-name",children:x}),e.jsx("span",{className:"trend-count",children:g})]},x))})]}),e.jsxs("div",{className:"trend-card",children:[e.jsx("h4",{children:"Formatos de Exportación"}),e.jsx("div",{className:"trend-list",children:Object.entries(a.trends.export_formats).sort(([,x],[,g])=>g-x).slice(0,5).map(([x,g])=>e.jsxs("div",{className:"trend-item",children:[e.jsx("span",{className:"trend-name",children:x}),e.jsx("span",{className:"trend-count",children:g})]},x))})]})]})]}),a.trends.recent_performance&&a.trends.recent_performance.length>0&&e.jsxs("div",{className:"performance-section",children:[e.jsx("h3",{children:"Rendimiento Reciente"}),e.jsxs("div",{className:"performance-chart",children:[e.jsx("div",{className:"chart-container",children:a.trends.recent_performance.map((x,g)=>e.jsx("div",{className:"chart-bar",style:{height:`${Math.min(x.value*10,100)}%`,left:`${g/a.trends.recent_performance.length*100}%`},title:`${x.value.toFixed(2)}s - ${new Date(x.timestamp).toLocaleTimeString()}`},g))}),e.jsx("div",{className:"chart-labels",children:e.jsx("span",{children:"Tiempo de Procesamiento (segundos)"})})]})]})]}):null})]})}):null},Pa=()=>{const[s,t]=m.useState([]),[a,n]=m.useState(!0);m.useEffect(()=>{const r=setInterval(()=>{t(u=>u.filter(j=>Date.now()-j.timestamp<5e3))},1e3);return()=>clearInterval(r)},[]);const c=(r,u,j,x=5e3)=>{const g={id:Date.now()+Math.random(),type:r,title:u,message:j,timestamp:Date.now(),duration:x};t(v=>[...v,g]),setTimeout(()=>{i(g.id)},x)},i=r=>{t(u=>u.filter(j=>j.id!==r))},o=r=>{switch(r){case"success":return e.jsx(U,{size:20});case"warning":return e.jsx(O,{size:20});case"error":return e.jsx(Y,{size:20});case"info":default:return e.jsx(W,{size:20})}},l=r=>`notification notification-${r}`;return window.showNotification=c,!a||s.length===0?null:e.jsx("div",{className:"notification-container",children:s.map(r=>e.jsxs("div",{className:l(r.type),children:[e.jsx("div",{className:"notification-icon",children:o(r.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsx("div",{className:"notification-title",children:r.title}),r.message&&e.jsx("div",{className:"notification-message",children:r.message})]}),e.jsx("button",{className:"notification-close",onClick:()=>i(r.id),children:e.jsx(ee,{size:16})}),e.jsx("div",{className:"notification-progress",style:{animationDuration:`${r.duration}ms`}})]},r.id))})},q={success:(s,t)=>{var a;return(a=window.showNotification)==null?void 0:a.call(window,"success",s,t)},warning:(s,t)=>{var a;return(a=window.showNotification)==null?void 0:a.call(window,"warning",s,t)},error:(s,t)=>{var a;return(a=window.showNotification)==null?void 0:a.call(window,"error",s,t)},info:(s,t)=>{var a;return(a=window.showNotification)==null?void 0:a.call(window,"info",s,t)}},Fa=()=>{const[s,t]=m.useState(!1),[a,n]=m.useState(!1),[c,i]=m.useState(!1),[o,l]=m.useState(!1),[r,u]=m.useState(!1),[j,x]=m.useState(!1),[g,v]=m.useState(!1),[h,p]=m.useState(!1),[E,z]=m.useState([]),[y,d]=m.useState(null),[S,w]=m.useState([]),[k,L]=m.useState(null),[f,T]=m.useState([]),[$,B]=m.useState(null),[_,oe]=m.useState(!1),[Me,de]=m.useState(0),[ns,Ae]=m.useState([]);m.useEffect(()=>{rs(),ls()},[]),$a({onAnalyze:be,onNewTab:()=>$e(),onCloseTab:()=>{$&&_e($)},onSelectTab:N=>{f[N]&&B(f[N].id)},onOpenMetrics:()=>v(!0),onOpenConnection:()=>l(!0),onExport:()=>{k?x(!0):q.warning("Exportación no disponible","No hay análisis para exportar")},onSave:()=>{const N=f.find(C=>C.id===$);N&&q.info("Guardado",`Contenido de ${N.title} guardado localmente`)},onShowHelp:()=>p(!0)});const rs=async()=>{try{const N=localStorage.getItem("sql_analyzer_history");N&&w(JSON.parse(N))}catch(N){console.error("Error loading analysis history:",N)}},ls=async()=>{try{const N=localStorage.getItem("sql_analyzer_connections");N&&z(JSON.parse(N))}catch(N){console.error("Error loading connections:",N)}},P=(N,C="info")=>{const D={id:Date.now(),timestamp:new Date().toLocaleTimeString(),message:N,type:C};Ae(F=>[...F,D])},$e=(N=null)=>{const C={id:Date.now(),title:N?N.name:"Nueva Consulta",content:"",file:N,analysis:null,isDirty:!1,type:"sql"};T(D=>[...D,C]),B(C.id),N&&P(`Archivo cargado: ${N.name}`,"success")},_e=N=>{if(T(C=>C.filter(D=>D.id!==N)),$===N){const C=f.filter(D=>D.id!==N);B(C.length>0?C[0].id:null)}},cs=(N,C)=>{T(D=>D.map(F=>F.id===N?{...F,content:C,isDirty:!0}:F))},be=async()=>{var C,D,F;const N=f.find(M=>M.id===$);if(!N||!N.content.trim()){P("No hay contenido para analizar","warning"),q.warning("Análisis no disponible","No hay contenido SQL para analizar");return}oe(!0),de(0),P("Iniciando análisis...","info"),q.info("Análisis iniciado",`Analizando ${N.title}...`);try{const M=setInterval(()=>{de(ae=>ae>=90?(clearInterval(M),90):ae+10)},200),me=new FormData,ms=new Blob([N.content],{type:"text/plain"});me.append("file",ms,N.title);const ke=await fetch("/api/analyze",{method:"POST",body:me});if(clearInterval(M),de(100),!ke.ok)throw new Error(`HTTP error! status: ${ke.status}`);const J=await ke.json();T(ae=>ae.map(te=>te.id===$?{...te,analysis:J,isDirty:!1}:te)),L(J);const hs={id:Date.now(),filename:N.title,timestamp:new Date().toISOString(),summary:J.summary,analysis:J.analysis};w(ae=>{const te=[hs,...ae.slice(0,19)];return localStorage.setItem("sql_analyzer_history",JSON.stringify(te)),te}),P(`Análisis completado: ${((C=J.summary)==null?void 0:C.total_errors)||0} errores encontrados`,"success");const we=((D=J.summary)==null?void 0:D.total_errors)||0,ps=((F=J.summary)==null?void 0:F.performance_score)||100;we===0&&ps>=90?q.success("Análisis completado","SQL analizado sin errores críticos"):we>0?q.warning("Análisis completado",`Se encontraron ${we} errores`):q.info("Análisis completado","Revisa los resultados para más detalles")}catch(M){console.error("Analysis error:",M),P(`Error en análisis: ${M.message}`,"error"),q.error("Error en análisis",M.message||"Error desconocido durante el análisis")}finally{oe(!1),de(0)}},os=async N=>{if(!k){P("No hay análisis para exportar","warning"),q.warning("Exportación no disponible","No hay análisis para exportar");return}try{P(`Exportando en formato ${N}...`,"info"),q.info("Exportación iniciada",`Generando archivo en formato ${N.toUpperCase()}...`);const C=await fetch(`/api/download?format=${N}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const D=await C.blob(),F=window.URL.createObjectURL(D),M=document.createElement("a");M.style.display="none",M.href=F,M.download=`analysis_${Date.now()}.${N}`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(F),document.body.removeChild(M),P(`Exportación completada: ${N}`,"success"),q.success("Exportación completada",`Archivo ${N.toUpperCase()} descargado exitosamente`)}catch(C){console.error("Export error:",C),P(`Error en exportación: ${C.message}`,"error"),q.error("Error en exportación",C.message||"Error desconocido durante la exportación")}},ds=N=>{Array.from(N).forEach(C=>{if(C.type==="text/plain"||C.name.endsWith(".sql")){const D=new FileReader;D.onload=F=>{const M={id:Date.now()+Math.random(),title:C.name,content:F.target.result,file:C,analysis:null,isDirty:!1,type:"sql"};T(me=>[...me,M]),B(M.id),P(`Archivo cargado: ${C.name}`,"success")},D.readAsText(C)}else P(`Formato de archivo no soportado: ${C.name}`,"warning")})};return e.jsxs("div",{className:"enterprise-app",children:[e.jsxs("div",{className:"app-layout",children:[e.jsx(Ca,{collapsed:s,onToggle:()=>t(!s),connections:E,currentConnection:y,onConnectionSelect:d,onNewConnection:()=>l(!0),analysisHistory:S,onHistorySelect:N=>{L(N.analysis),P(`Cargado análisis: ${N.filename}`,"info")},onFileUpload:ds}),e.jsx(za,{activeTabs:f,activeTabId:$,onTabSelect:B,onTabClose:_e,onTabContentChange:cs,onNewTab:()=>$e(),onAnalyze:be,onOpenMetrics:()=>v(!0),isAnalyzing:_,analysisProgress:Me,currentAnalysis:k}),e.jsx(Ta,{collapsed:a,onToggle:()=>n(!a),currentAnalysis:k,onExport:()=>x(!0),onAnalysisSettings:()=>u(!0)})]}),e.jsx(La,{collapsed:c,onToggle:()=>i(!c),logs:ns,onClearLogs:()=>Ae([]),isAnalyzing:_,analysisProgress:Me}),e.jsx(Da,{isOpen:o,onClose:()=>l(!1),onSave:N=>{z(C=>{const D=[...C,{...N,id:Date.now()}];return localStorage.setItem("sql_analyzer_connections",JSON.stringify(D)),D}),l(!1),P(`Conexión guardada: ${N.name}`,"success")}}),e.jsx(Ma,{isOpen:r,onClose:()=>u(!1),onAnalyze:N=>{u(!1),be()}}),e.jsx(Aa,{isOpen:j,onClose:()=>x(!1),onExport:(N,C)=>{x(!1),os(N)},currentAnalysis:k}),e.jsx(Ia,{isVisible:g,onClose:()=>v(!1)}),e.jsx(Oa,{isOpen:h,onClose:()=>p(!1)}),e.jsx(Pa,{})]})};function qa(){return e.jsx("div",{className:"App",children:e.jsx(Fa,{})})}class Ba extends Ke.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){console.error("React Error Boundary caught an error:",t,a)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Algo salió mal"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Ha ocurrido un error inesperado en la aplicación."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Recargar página"})]})}):this.props.children}}Ee.createRoot(document.getElementById("root")).render(e.jsx(Ke.StrictMode,{children:e.jsx(Ba,{children:e.jsxs(us,{children:[e.jsx(qa,{}),e.jsx(ma,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#374151",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"12px 16px",fontSize:"14px",maxWidth:"400px"},success:{iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}));
//# sourceMappingURL=index-348a2552.js.map
