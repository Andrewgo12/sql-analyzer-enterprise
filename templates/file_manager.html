{% extends "base.html" %}

{% block title %}File Manager - SQL Analyzer Enterprise{% endblock %}
{% block page_title %}File Manager{% endblock %}

{% block header_actions %}
    <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
        üìÅ Subir Archivo
    </button>
    <button class="btn btn-secondary" onclick="refreshFiles()">
        üîÑ Actualizar
    </button>
{% endblock %}

{% block content %}
<div class="file-manager-container">
    <input type="file" id="fileInput" multiple accept=".sql,.txt" style="display: none;" onchange="handleFileUpload(this)">
    
    <!-- Upload Area -->
    <div class="upload-area" style="border: 2px dashed #262626; border-radius: 8px; padding: 40px; text-align: center; margin-bottom: 24px; cursor: pointer;" onclick="document.getElementById('fileInput').click()">
        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">üìÅ</div>
        <h3>Subir Archivos SQL</h3>
        <p>Arrastra archivos aqu√≠ o haz clic para seleccionar</p>
    </div>

    <!-- Files List -->
    <div class="card">
        <div class="card-header">
            <div class="card-title">üìÑ Archivos Subidos</div>
        </div>
        <div class="card-content">
            <div style="display: grid; gap: 12px;">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #1a1a1a; border-radius: 6px;">
                    <div>
                        <div style="font-weight: 500;">usuarios_tabla.sql</div>
                        <div style="font-size: 12px; color: #71717a;">2.3 KB ‚Ä¢ Subido hace 1 hora</div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">Analizar</button>
                        <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;">Eliminar</button>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #1a1a1a; border-radius: 6px;">
                    <div>
                        <div style="font-weight: 500;">productos_consultas.sql</div>
                        <div style="font-size: 12px; color: #71717a;">5.7 KB ‚Ä¢ Subido hace 2 horas</div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">Analizar</button>
                        <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;">Eliminar</button>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #1a1a1a; border-radius: 6px;">
                    <div>
                        <div style="font-weight: 500;">backup_completo.sql</div>
                        <div style="font-size: 12px; color: #71717a;">1.2 MB ‚Ä¢ Subido ayer</div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">Analizar</button>
                        <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function handleFileUpload(input) {
    const files = input.files;
    if (files.length > 0) {
        showAlert(`Subiendo ${files.length} archivo(s)...`, 'info');
        // Simulate upload
        setTimeout(() => {
            showAlert('Archivos subidos exitosamente', 'success');
            refreshFiles();
        }, 2000);
    }
}

function refreshFiles() {
    showAlert('Actualizando lista de archivos...', 'info');
    setTimeout(() => location.reload(), 1000);
}
</script>
{% endblock %}
